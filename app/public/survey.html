<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Diablo Class Finder</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
        crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>
</head>

<body>
    <main>
        <div class="container text-center">
            <h3>Survey</h3>
            <h6>Please answer the following questions</h6>
            <form>
                <div class="form-group">
                    <label for="user-name">Name:</label>
                    <input type="text" name="user-name" id="name-input">
                </div>

                <div class="form-group">
                    <label for="q1">Question 1:</label>
                    <p>You like to bash demons up close and personal:</p>
                    <select class="form-control" id="q1">
                        <option value="1">Strong Disagree</option>
                        <option value="2">Disagree</option>
                        <option value="3" selected>Neutral</option>
                        <option value="4">Agree</option>
                        <option value="5">Strong Agree</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="q2">Question 2:</label>
                    <p>You plow throw enemies with spells:</p>
                    <select class="form-control" id="q2">
                        <option value="1">Strong Disagree</option>
                        <option value="2">Disagree</option>
                        <option value="3" selected>Neutral</option>
                        <option value="4">Agree</option>
                        <option value="5">Strong Agree</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="q3">Question 3:</label>
                    <p>You believe in fighting with honor:</p>
                    <select class="form-control" id="q3">
                        <option value="1">Strong Disagree</option>
                        <option value="2">Disagree</option>
                        <option value="3" selected>Neutral</option>
                        <option value="4">Agree</option>
                        <option value="5">Strong Agree</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="q4">Question 4:</label>
                    <p>You prefer to fight with your fists:</p>
                    <select class="form-control" id="q4">
                        <option value="1">Strong Disagree</option>
                        <option value="2">Disagree</option>
                        <option value="3" selected>Neutral</option>
                        <option value="4">Agree</option>
                        <option value="5">Strong Agree</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="q5">Question 5:</label>
                    <p>You're into voodoo and other weird stuff:</p>
                    <select class="form-control" id="q5">
                        <option value="1">Strong Disagree</option>
                        <option value="2">Disagree</option>
                        <option value="3" selected>Neutral</option>
                        <option value="4">Agree</option>
                        <option value="5">Strong Agree</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="q6">Question 6:</label>
                    <p>You like raising the dead</p>
                    <select class="form-control" id="q6">
                        <option value="1">Strong Disagree</option>
                        <option value="2">Disagree</option>
                        <option value="3" selected>Neutral</option>
                        <option value="4">Agree</option>
                        <option value="5">Strong Agree</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="q7">Question 7:</label>
                    <p>You like to aid allies with support</p>
                    <select class="form-control" id="q7">
                        <option value="1">Strong Disagree</option>
                        <option value="2">Disagree</option>
                        <option value="3" selected>Neutral</option>
                        <option value="4">Agree</option>
                        <option value="5">Strong Agree</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="q8">Question 8:</label>
                    <p>You like being the center of attention</p>
                    <select class="form-control" id="q8">
                        <option value="1">Strong Disagree</option>
                        <option value="2">Disagree</option>
                        <option value="3" selected>Neutral</option>
                        <option value="4">Agree</option>
                        <option value="5">Strong Agree</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="q9">Question 9:</label>
                    <p>You prefer to be quick and light on your feet</p>
                    <select class="form-control" id="q9">
                        <option value="1">Strong Disagree</option>
                        <option value="2">Disagree</option>
                        <option value="3" selected>Neutral</option>
                        <option value="4">Agree</option>
                        <option value="5">Strong Agree</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="q10">Question 10:</label>
                    <p>You like to shoot things</p>
                    <select class="form-control" id="q10">
                        <option value="1">Strong Disagree</option>
                        <option value="2">Disagree</option>
                        <option value="3" selected>Neutral</option>
                        <option value="4">Agree</option>
                        <option value="5">Strong Agree</option>
                    </select>
                </div>

                <button class="btn btn-primary mb-5" type="submit">Submit</button>
        </div>
    </main>

    </form>

    <script>
        const submitButton = $('.btn');
        const form = $('form');

        form.on("submit",(event)=>{
            event.preventDefault();
            // deconstruct event object's target as formData
            const { target:formData } = event;
            // formData returns array of each form element, use deconstruction to make variables for each form input
            const [name,q1,q2,q3,q4,q5,q6,q7,q8,q9,q10] = formData;
            // formData variables are html element, collect values
            const data = {"form":[name.value,q1.value,q2.value,q3.value,q4.value,q5.value,q6.value,q7.value,q8.value,q9.value,q10.value]};
            console.log(`Sending ${data.form}`);
            
            // make POST request to api/classes
            $.ajax({
                method:'POST',
                url:'/api/classes',
                data:data
            })
            .then(response=>{
                console.log(`Returned: ${JSON.stringify(response)}`);
            })
            .done(err=>{if(err) throw err});

            // displayMatch(index)
        })
    </script>
</body>

</html>